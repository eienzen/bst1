<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Snakes Game</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 20px; background-color: #f0f0f0; }
        #gameCanvas { border: 1px solid #000; }
        .stats { margin: 10px 0; }
        .button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        #gameOverPopup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 2px solid #000; z-index: 1000; }
        #loadingIndicator { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.5); color: white; padding: 20px; z-index: 1001; }
        .section { margin: 20px 0; }
        input, select { padding: 5px; margin: 5px; }
    </style>
    <audio id="eatingSound" src="https://www.soundjay.com/buttons/beep-01a.mp3"></audio>
    <audio id="gameOverSound" src="https://www.soundjay.com/buttons/beep-02.mp3"></audio>
    <audio id="victorySound" src="https://www.soundjay.com/buttons/beep-03.mp3"></audio>
</head>
<body>
    <h1>Block Snakes Game</h1>
    <div id="walletAddress">Wallet: Not Connected</div>
    <button id="connectWallet" class="button">Connect Wallet</button>
    <button id="disconnectWallet" class="button" style="display: none;">Disconnect Wallet</button>
    <button id="playGame" class="button">Play Game</button>
    <button id="enterFullscreen" class="button">Enter Fullscreen</button>
    <div class="stats">
        <div id="boxesEaten">Boxes Eaten: 0</div>
        <div id="pendingPoints">Pending Points: 0 BST Points</div>
        <div id="gamesPlayed">Games Played: 0</div>
        <div id="totalPoints">Total Points: 0 BST Points</div>
        <div id="totalRewards">Total Rewards: 0 BST Tokens</div>
        <div id="totalReferrals">Total Referrals: 0</div>
        <div id="referralPoints">Referral Points: 0 BST Points</div>
        <div id="walletBalance">Wallet Balance: 0 BST Tokens</div>
        <div id="flexibleStakeBalance">Flexible Stake Balance: 0 BST Tokens</div>
        <div id="lockedStakeBalance">Locked Stake Balances: 60 Days: 0, 180 Days: 0, 365 Days: 0</div>
    </div>
    <canvas id="gameCanvas"></canvas>
    <div id="gameOverPopup">
        <h2>Game Over</h2>
        <div id="finalBoxesEaten"></div>
        <div id="finalPoints"></div>
        <button id="closePopup" class="button">Close</button>
    </div>
    <div id="loadingIndicator">Loading...</div>
    <div class="section">
        <h3>Tasks & Rewards</h3>
        <button id="claimWelcomeBonus" class="button">Claim Welcome Bonus</button>
        <button id="claimDailyLoginReward" class="button">Claim Daily Login Reward</button>
        <button id="claimSocialMediaShareReward" class="button">Claim Social Media Share Reward</button>
        <ul id="taskHistory"></ul>
        <ul id="rewardHistory"></ul>
        <ul id="stakingHistory"></ul>
    </div>
    <div class="section">
        <h3>Convert Points to Tokens</h3>
        <input type="number" id="convertPointsAmount" placeholder="Enter points to convert">
        <input type="text" id="referrerAddress" placeholder="Enter referrer address (optional)">
        <button id="convertPointsToTokens" class="button">Convert Points</button>
    </div>
    <div class="section">
        <h3>Stake Tokens</h3>
        <input type="number" id="stakeAmount" placeholder="Enter amount to stake">
        <select id="lockPeriod">
            <option value="0">Flexible</option>
            <option value="1">60 Days</option>
            <option value="2">180 Days</option>
            <option value="3">365 Days</option>
        </select>
        <button id="stakeTokens" class="button">Stake Tokens</button>
    </div>
    <div class="section">
        <h3>Unstake Tokens</h3>
        <input type="number" id="unstakeAmount" placeholder="Enter amount to unstake">
        <select id="unlockPeriod">
            <option value="0">Flexible</option>
            <option value="1">60 Days</option>
            <option value="2">180 Days</option>
            <option value="3">365 Days</option>
        </select>
        <button id="unstakeTokens" class="button">Unstake Tokens</button>
    </div>
    <div class="section">
        <h3>Withdraw Pending Rewards</h3>
        <input type="number" id="withdrawRewardAmount" placeholder="Enter amount to withdraw">
        <button id="withdrawPendingRewards" class="button">Withdraw Rewards</button>
    </div>
    <div class="section">
        <h3>Owner Functions</h3>
        <div><input type="number" id="mintAmount" placeholder="Enter amount to mint"><input type="text" id="mintKey" placeholder="Secret Key"><button id="mintTokens" class="button">Mint Tokens</button></div>
        <div><input type="number" id="burnAmount" placeholder="Enter amount to burn"><input type="text" id="burnKey" placeholder="Secret Key"><button id="burnTokens" class="button">Burn Tokens</button></div>
        <div><input type="number" id="newWelcomeBonus" placeholder="New Welcome Bonus"><input type="text" id="welcomeBonusKey" placeholder="Secret Key"><button id="updateWelcomeBonus" class="button">Update Welcome Bonus</button></div>
        <div><input type="number" id="newReferralRate" placeholder="New Referral Rate"><input type="text" id="referralRateKey" placeholder="Secret Key"><button id="updateReferralCommissionRate" class="button">Update Referral Rate</button></div>
        <div><input type="number" id="newWithdrawalFee" placeholder="New Withdrawal Fee (BNB Wei)"><input type="text" id="withdrawalFeeKey" placeholder="Secret Key"><button id="updateWithdrawalFee" class="button">Update Withdrawal Fee</button></div>
        <div><input type="number" id="newMaxConversionLimit" placeholder="New Max Conversion Limit"><input type="text" id="maxConversionLimitKey" placeholder="Secret Key"><button id="updateMaxConversionLimit" class="button">Update Max Conversion Limit</button></div>
        <div><input type="number" id="newConversionRatio" placeholder="New Conversion Ratio"><input type="text" id="conversionRatioKey" placeholder="Secret Key"><button id="updateConversionRatio" class="button">Update Conversion Ratio</button></div>
        <div><select id="lockRewardPeriod"><option value="1">60 Days</option><option value="2">180 Days</option><option value="3">365 Days</option></select><input type="number" id="newLockRewardRate" placeholder="New Lock Reward Rate"><input type="text" id="lockRewardKey" placeholder="Secret Key"><button id="updateLockReward" class="button">Update Lock Reward</button></div>
        <div><input type="text" id="newGameOracle" placeholder="New Game Oracle Address"><input type="text" id="gameOracleKey" placeholder="Secret Key"><button id="updateGameOracle" class="button">Update Game Oracle</button></div>
        <div><input type="text" id="newOwnerWallet" placeholder="New Owner Wallet Address"><input type="text" id="ownerWalletKey" placeholder="Secret Key"><button id="updateOwnerWallet" class="button">Update Owner Wallet</button></div>
        <div><input type="text" id="newSecretKey" placeholder="New Secret Key"><input type="text" id="currentSecretKey" placeholder="Current Secret Key"><button id="updateSecretKey" class="button">Update Secret Key</button></div>
    </div>
    <script src="game.js"></script>
</body>
</html>
